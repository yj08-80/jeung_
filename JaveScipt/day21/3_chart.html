<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>chart</title>
</head>

<body>
    <h3>차트 : https://www.chartjs.org/</h3>

    <div>
        <canvas id="myChart"></canvas>
    </div>


    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>


    <script>
        // const ctx = document.getElementById('myChart');
        const ctx = document.querySelector("#myChart");
        new Chart(ctx, {
            type: 'bar',        //차트유형
            data: {             //차트에 표시되는 데이터
                labels: ['Red', 'Blue', 'Yellow', 'Green', 'Purple', 'Orange'], //가로축 항목
                datasets: [
                    { label: '# of Votes', data: [12, 19, 3, 5, 2, 3] },
                    { label: '# of Votes', data: [1, 10, 7, 5, 21, 8] } //값들,데이터명}
                ]
            },
            options: {
                scales: {
                    y: {
                        beginAtZero: true
                    }
                }
            }
        });
    </script>

    // [생각해보기] : 부평구 인원현황 api 정보 를 활용하여 '동별' 별로 '인구수(계)' 와 '세대수' 시각화
    // * 그래프 코드 참고 : https://www.chartjs.org/docs/latest/getting-started/
    <div>
        <canvas id="myChart2"></canvas>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
    <script>
    const ctx2 = document.getElementById('myChart2');

    // 1. 부평구 인구 정보 
    let response = {"currentCount":22,"data":[{"데이터기준일자":"2025-01-31","동별":"부평1동","세대수":17196,"인구수(계)":34809,"인구수(남)":16671,"인구수(여)":18138},{"데이터기준일자":"2025-01-31","동별":"부평2동","세대수":7793,"인구수(계)":15326,"인구수(남)":7594,"인구수(여)":7732},{"데이터기준일자":"2025-01-31","동별":"부평3동","세대수":7381,"인구수(계)":14889,"인구수(남)":7379,"인구수(여)":7510},{"데이터기준일자":"2025-01-31","동별":"부평4동","세대수":17750,"인구수(계)":33475,"인구수(남)":16530,"인구수(여)":16945},{"데이터기준일자":"2025-01-31","동별":"부평5동","세대수":16357,"인구수(계)":33137,"인구수(남)":16287,"인구수(여)":16850},{"데이터기준일자":"2025-01-31","동별":"부평6동","세대수":8469,"인구수(계)":17339,"인구수(남)":8527,"인구수(여)":8812},{"데이터기준일자":"2025-01-31","동별":"산곡1동","세대수":6476,"인구수(계)":14753,"인구수(남)":7265,"인구수(여)":7488},{"데이터기준일자":"2025-01-31","동별":"산곡2동","세대수":10680,"인구수(계)":29107,"인구수(남)":14264,"인구수(여)":14843},{"데이터기준일자":"2025-01-31","동별":"산곡3동","세대수":8521,"인구수(계)":20016,"인구수(남)":9659,"인구수(여)":10357},{"데이터기준일자":"2025-01-31","동별":"산곡4동","세대수":6558,"인구수(계)":16457,"인구수(남)":7828,"인구수(여)":8629},{"데이터기준일자":"2025-01-31","동별":"청천1동","세대수":9678,"인구수(계)":22557,"인구수(남)":11446,"인구수(여)":11111},{"데이터기준일자":"2025-01-31","동별":"청천2동","세대수":14441,"인구수(계)":32868,"인구수(남)":16385,"인구수(여)":16483},{"데이터기준일자":"2025-01-31","동별":"갈산1동","세대수":6669,"인구수(계)":14299,"인구수(남)":7264,"인구수(여)":7035},{"데이터기준일자":"2025-01-31","동별":"갈산2동","세대수":8059,"인구수(계)":17320,"인구수(남)":8347,"인구수(여)":8973},{"데이터기준일자":"2025-01-31","동별":"삼산1동","세대수":14144,"인구수(계)":31979,"인구수(남)":15654,"인구수(여)":16325},{"데이터기준일자":"2025-01-31","동별":"삼산2동","세대수":10234,"인구수(계)":27290,"인구수(남)":13133,"인구수(여)":14157},{"데이터기준일자":"2025-01-31","동별":"부개1동","세대수":7662,"인구수(계)":15149,"인구수(남)":7565,"인구수(여)":7584},{"데이터기준일자":"2025-01-31","동별":"부개2동","세대수":8266,"인구수(계)":18864,"인구수(남)":9168,"인구수(여)":9696},{"데이터기준일자":"2025-01-31","동별":"부개3동","세대수":12055,"인구수(계)":27936,"인구수(남)":13325,"인구수(여)":14611},{"데이터기준일자":"2025-01-31","동별":"일신동","세대수":5018,"인구수(계)":11486,"인구수(남)":5783,"인구수(여)":5703},{"데이터기준일자":"2025-01-31","동별":"십정1동","세대수":11047,"인구수(계)":24100,"인구수(남)":12019,"인구수(여)":12081},{"데이터기준일자":"2025-01-31","동별":"십정2동","세대수":11099,"인구수(계)":20697,"인구수(남)":10726,"인구수(여)":9971}],"matchCount":22,"page":1,"perPage":22,"totalCount":22}
        // ======================= 원하는 데이터로 가공한다. ========= //
    // 2. 가로축에 들어갈 (항목명)배열 만들기
    let 동이름배열 = [];
    // 3. 데이터셋에 들어갈 (인구수)배열 과 (세대수)배열 만들기
    let 인구수배열 = []
    let 세대수배열 = []
    // --- for 이용한 데이터 정리하기.
    for( let index = 0 ; index <= response.data.length-1 ; index++ ){
        let object = response.data[ index ]; // index번째 동 정보 가져오기 
        // + 각 배열내 동별 정보를 각 대입하기.
        동이름배열.push( object['동별'] );
        인구수배열.push( object['인구수(계)'] );
        세대수배열.push( object['세대수'] );
    }

    new Chart(ctx2, {
        type: 'bar',
        data: {
        labels : 동이름배열 , 
        datasets: [
            { label : '인구수' , data : 인구수배열 } ,
            { label : '세대수' , data : 세대수배열 }
        ]
        }
    });
    </script>
</body>

</html>